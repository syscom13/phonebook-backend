(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),u=n.n(c),o=n(6),l=n(1),s=n.n(l),i=n(3),m=n(4),p=n(5),f=n.n(p),d="/api/persons",h={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(d);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(d,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(d,"/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(d,"/").concat(t));case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.person,n=e.handleDelete;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t)}},"Delete")))},v=function(e){var t=e.persons,n=e.searchTerm,a=e.handleDelete,c=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(b,{key:e.id,person:e,handleDelete:a})}));return r.a.createElement("table",null,r.a.createElement("tbody",null,c))},w=function(e){var t=e.newName,n=e.newPhoneNumber,a=e.handleNameChange,c=e.handlePhoneNumberChange,u=e.addPerson;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",null,"Name:",r.a.createElement("input",{value:t,onChange:a,type:"text"})),r.a.createElement("div",null,"Phone Number:",r.a.createElement("input",{value:n,onChange:c,type:"text"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},E=function(e){var t=e.searchTerm,n=e.handleSearchChange;return r.a.createElement(r.a.Fragment,null,"Filter shown with\xa0",r.a.createElement("input",{value:t,onChange:n,type:"text"}))},x=function(e){var t=e.message;if(null===t)return null;var n="error"===t.type?"error":"success";return r.a.createElement("div",{className:n},t.payload)},k=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),l=Object(m.a)(u,2),p=l[0],f=l[1],d=Object(a.useState)(""),b=Object(m.a)(d,2),k=b[0],y=b[1],j=Object(a.useState)(""),O=Object(m.a)(j,2),g=O[0],C=O[1],N=Object(a.useState)(null),T=Object(m.a)(N,2),S=T[0],P=T[1],D=Object(a.useState)(null),A=Object(m.a)(D,2),F=A[0],I=A[1];Object(a.useEffect)((function(){(function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.getAll();case 3:t=e.sent,c(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),P("There was en error fetching data from the server"),setTimeout((function(){P(null)}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var J=function(e){return e.trim()},L=function(){f(""),y("")},B=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a=n.some((function(e){return e.name===J(p)})))||k){e.next=6;break}alert("".concat(J(p)," is already added to the phonebook")),e.next=26;break;case 6:if(!a||!k){e.next=11;break}return e.next=9,q();case 9:e.next=26;break;case 11:return r={name:J(p),number:J(k)},e.prev=12,e.next=15,h.create(r);case 15:u=e.sent,c(n.concat(u)),I("".concat(u.name," was added successfully")),setTimeout((function(){I(null)}),5e3),L(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(12),P('"'.concat(r.name,'" could not be saved to the database')),setTimeout((function(){P(null)}),5e3);case 26:case"end":return e.stop()}}),e,null,[[12,22]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("".concat(J(p)," was already added to the phonebook, replace the old number with the new one?"))){e.next=17;break}return t=Object(o.a)(Object(o.a)({},n.find((function(e){return e.name===J(p)}))),{},{number:J(k)}),e.prev=3,e.next=6,h.update(t.id,t);case 6:a=e.sent,c(n.map((function(e){return e.name===p?a:e}))),I("".concat(a.name,"'s phone number was updated successfully")),setTimeout((function(){I(null)}),5e3),L(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),P("Informations about ".concat(t.name," have already been deleted from the server")),setTimeout((function(){P(null)}),5e3);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.name,r=t.id,!window.confirm("Are you sure you want to delete ".concat(a,"?"))){e.next=15;break}return e.prev=3,e.next=6,h.remove(r);case 6:c(n.filter((function(e){return e.id!==r}))),I("".concat(a," was deleted from the phonebook")),setTimeout((function(){I(null)}),5e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),P("".concat(a," could not be removed")),setTimeout((function(){P(null)}),5e3);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"small container"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(x,{message:S?{type:"error",payload:S}:F?{type:"success",payload:F}:null}),r.a.createElement("div",null,r.a.createElement(E,{searchTerm:g,handleSearchChange:function(e){return C(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("h2",null,"Add a Contact"),r.a.createElement(w,{newName:p,newPhoneNumber:k,handleNameChange:function(e){return f(e.target.value)},handlePhoneNumberChange:function(e){return y(e.target.value)},addPerson:B})),r.a.createElement("div",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:n,searchTerm:g,handleDelete:z})))};n(40);u.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.cbd7c1e4.chunk.js.map